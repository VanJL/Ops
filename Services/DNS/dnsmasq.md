# dnsmasq

> 本章节介绍了dnsmasq的简单使用，如何快速的部署一个内网DNS服务器。

## Author

```
Name:Shinefire
Blog:https://github.com/shine-fire/Ops_Notes
E-mail:shine_fire@qq.com
```

## 原理介绍

## 部署步骤

1. 安装软件

   ```bash
   # yum -y install dnsmasq
   ```

2. 修改配置文件

   ```bash
   # cat /etc/dnsmasq.d/shinefire.cc 
   interface=ens33
   bind-dynamic
   resolv-file=/etc/resolv.dnsmasq
   
   address=/iscsi.shinefire.com/192.168.31.228
   address=/iscsi.shinefire.com/192.168.31.229
   address=/rhvm.shinefire.com/192.168.31.230
   address=/rhvh1.shinefire.com/192.168.31.234
   ```

3. 修改/etc/hosts

   ```bash
   [root@dns ~]# cat /etc/hosts
   127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
   ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
   114.108.188.251  cdn.redhat.com
   192.168.31.228   iscsi.shinefire.com
   192.168.31.229   iscsi.shinefire.com
   192.168.31.230   rhvm.shinefire.com
   192.168.31.234   rhvh1.shinefire.com 
   ```

4. 修改自己的/etc/resolv.conf

   ```bash
   [root@dns ~]# cat /etc/resolv.conf 
   # Generated by NetworkManager
   search com shinefire.com
   nameserver 192.168.31.1
   nameserver 192.168.31.228
   ```

5. 启动服务

   ```bash
   [root@nuc ~]# systemctl restart dnsmasq.service 
   [root@nuc ~]# systemctl status dnsmasq.service 
   ```

6. 



## 参考文献

